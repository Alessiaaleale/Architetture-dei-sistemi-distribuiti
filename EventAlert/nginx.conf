server {
    listen 80;
    server_name _;

    # Intestazioni proxy standard
    proxy_set_header Host              $host;
    proxy_set_header X-Real-IP         $remote_addr;
    proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;

    # ===========================
    # API pubbliche
    # ===========================
    # Mappa /api/<qualunque> → /<qualunque> sul backend Flask
    # Esempio: /api/create_event → /create_event nel backend
    location /api/ {
        rewrite ^/api/?(.*)$ /$1 break;
        proxy_pass http://flask-app:8080;   # oppure http://subscriptions:8080 se preferisci il nome servizio
    }

    # ===========================
    # App HTML (frontend esistente)
    # ===========================
    location / {
        proxy_pass http://flask-app:8080;   # passa tutto a Flask come già fai ora
    }
}